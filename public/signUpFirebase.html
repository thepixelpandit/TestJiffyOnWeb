<!DOCTYPE html>
<html>
<head>
  <title>Jiffy App - Web Version</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="icon" href="/images/site_related/favicon.png" type="image/x-icon">
  <!-- <link rel="stylesheet" href=".\css\style.css"> -->
  <link rel="stylesheet" href="/css/style.css">

</head>
<body>
  <div class="login-container">
    <h1>Jiffy: Registration</h1>
    <form class = 'controlForm' action="/register" method="POST" autocomplete="off">
      <div class="loginElemets">
        <input type="email" name="email" id="email" placeholder="Email">
        <input type="password" name="password" id="password" placeholder="Password">
        <input type="password" name="passwordReentered" id="passwordReentered" placeholder="Enter Your Password Again">
        <input type="text" name="displayName" id="displayName" placeholder="Display Name">
        
        <p id="passwordMatchError"></p>
        <p id="displayNameError"></p> <!-- Error message for display name -->
        
        <button class="btn btn-primary loginBtn" type="submit" onclick="return validateForm();">Register</button>

        <div class="loginButtons">
          <p> To Sign In - <a href="/"> Click Here: </a> </p>
        </div>
      </div>
    </form>
  </div>

  <script>
    function validateForm() {
      const password = document.getElementById('password').value;
      const passwordReentered = document.getElementById('passwordReentered').value;
      const displayName = document.getElementById('displayName').value;
      const passwordMatchError = document.getElementById('passwordMatchError');
      const displayNameError = document.getElementById('displayNameError');
  
      // Check if passwords match
      if (password !== passwordReentered) {
        passwordMatchError.textContent = "Passwords do not match.";
      } else {
        passwordMatchError.textContent = ""; // Clear password match error
      }
  
      // Trim and check if display name is blank
      const trimmedDisplayName = displayName.trim();
      console.log("The display name is: " + trimmedDisplayName + " Its length is: " + trimmedDisplayName.length);
  
      if (trimmedDisplayName === "") {
        displayNameError.textContent = "Display Name should not be empty.";
      } else {
        displayNameError.textContent = ""; // Clear display name error
      }
  
      // Prevent form submission if any validation error exists
      if (passwordMatchError.textContent || displayNameError.textContent) {
        return false;
      }
  
      // Allow form submission if all checks pass
      return true;
    }
  </script>
  
</body>
</html>
